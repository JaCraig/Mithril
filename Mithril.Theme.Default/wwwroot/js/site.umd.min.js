!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("moment")):"function"==typeof define&&define.amd?define(["moment"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).moment)}(this,(function(t){HTMLElement.prototype.getParentByClass=function(t){let e=this.parentElement;for(;e&&!e.hasClass(t);)e=e.parentElement;return e},HTMLElement.prototype.hasClass=function(t){return(" "+this.className+" ").indexOf(" "+t+" ")>-1},HTMLElement.prototype.replaceClass=function(t,e){let s=" "+this.className+" ";-1!==s.indexOf(t)?this.className=""===e?s.replace(new RegExp(" "+t+" ","gi")," ").trim():s.replace(new RegExp(" "+t+" ","gi")," "+e+" ").trim():this.addClass(e)},HTMLElement.prototype.toggleClass=function(t,e){this.hasClass(t)?this.replaceClass(t,e):this.replaceClass(e,t)},HTMLElement.prototype.removeClass=function(t){this.replaceClass(t,"")},HTMLElement.prototype.addClass=function(t){this.hasClass(t)||(this.className+=" "+t)},HTMLElement.prototype.show=function(){this.replaceClass("hidden","show"),this.addClass("show")},HTMLElement.prototype.hide=function(){this.replaceClass("show","hidden"),this.addClass("hidden")},HTMLElement.prototype.attribute=function(t,e=null){return null!=e?(this.setAttribute(t,e),e):this.getAttribute(t)},NodeList.prototype.map=function(t){let e=[];for(let s=0;s<this.length;++s)e=e.concat(t(this[s]));return e},NodeList.prototype.filter=function(t){let e=[];for(let s=0;s<this.length;++s)t(this[s])&&(e=e.concat(this[s]));return e};class e{constructor(){this.errors=[],this.messageAttributes={},this.messageAttributes.patternMismatch="data-error-message-pattern-mismatch",this.messageAttributes.rangeOverflow="data-error-message-range-overflow",this.messageAttributes.rangeUnderflow="data-error-message-range-underflow",this.messageAttributes.stepMismatch="data-error-message-step-mismatch",this.messageAttributes.tooLong="data-error-message-too-long",this.messageAttributes.tooShort="data-error-message-too-short",this.messageAttributes.badInput="data-error-message-bad-input",this.messageAttributes.typeMismatch="data-error-message-type-mismatch",this.messageAttributes.valueMissing="data-error-message-value-missing"}initialize(){let t=this.map(document.getElementsByTagName("input"),(t=>t)).filter((t=>t.willValidate));for(let e=0;e<t.length;++e)"RADIO"===t[e].type.toUpperCase()||"CHECKBOX"===t[e].type.toUpperCase()?t[e].addEventListener("change",(t=>this.inputHandler(t.target))):t[e].addEventListener("input",(t=>this.inputHandler(t.target))),t[e].addEventListener("invalid",(t=>this.invalidInputHandler(t.target)));let e=this.map(document.getElementsByTagName("textarea"),(t=>t)).filter((t=>t.willValidate));for(let t=0;t<e.length;++t)e[t].addEventListener("change",(t=>this.textAreaHandler(t.target))),e[t].addEventListener("invalid",(t=>this.invalidTextAreaHandler(t.target)));let s=this.map(document.getElementsByTagName("select"),(t=>t)).filter((t=>t.willValidate));for(let t=0;t<s.length;++t)s[t].addEventListener("change",(t=>this.selectHandler(t.target))),s[t].addEventListener("invalid",(t=>this.invalidSelectHandler(t.target)))}map(t,e){let s=[];for(let r=0;r<t.length;++r)s=s.concat(e(t[r]));return s}filter(t,e){let s=[];for(let r=0;r<t.length;++r)e(t[r])&&(s=s.concat(t[r]));return s}initializeForm(t){let e=this.map(t.getElementsByTagName("input"),(t=>t)).filter((t=>t.willValidate));for(let t=0;t<e.length;++t)"RADIO"===e[t].type.toUpperCase()||"CHECKBOX"===e[t].type.toUpperCase()?e[t].addEventListener("change",(t=>this.inputHandler(t.target))):e[t].addEventListener("input",(t=>this.inputHandler(t.target))),e[t].addEventListener("invalid",(t=>this.invalidInputHandler(t.target)));let s=this.map(t.getElementsByTagName("textarea"),(t=>t)).filter((t=>t.willValidate));for(let t=0;t<s.length;++t)s[t].addEventListener("change",(t=>this.textAreaHandler(t.target))),s[t].addEventListener("invalid",(t=>this.invalidTextAreaHandler(t.target)));let r=this.map(t.getElementsByTagName("select"),(t=>t)).filter((t=>t.willValidate));for(let t=0;t<r.length;++t)r[t].addEventListener("change",(t=>this.selectHandler(t.target))),r[t].addEventListener("invalid",(t=>this.invalidSelectHandler(t.target)))}invalidInputHandler(t){if(!t.validity.valid){let e=this.getErrorMessages(t,t.validity);e.length>0&&t.setCustomValidity(e.join("\n"))}}invalidTextAreaHandler(t){if(!t.validity.valid){let e=this.getErrorMessages(t,t.validity);e.length>0&&t.setCustomValidity(e.join("\n"))}}invalidSelectHandler(t){if(!t.validity.valid){let e=this.getErrorMessages(t,t.validity);e.length>0&&t.setCustomValidity(e.join("\n"))}}inputHandler(t){if("RADIO"===t.type.toUpperCase()){let e=document.getElementsByName(t.name);for(let t=0;t<e.length;++t){e[t].setCustomValidity("")}}else t.setCustomValidity("");t.checkValidity()}textAreaHandler(t){t.setCustomValidity(""),t.checkValidity()}selectHandler(t){t.setCustomValidity(""),t.checkValidity()}validate(){let t=!0;this.errors=[];let e=this.filter(document.getElementsByTagName("input"),(t=>!this.validateInput(t)));t=t&&0===e.length;let s=this.filter(document.getElementsByTagName("select"),(t=>!this.validateSelect(t)));t=t&&0===s.length;let r=this.filter(document.getElementsByTagName("textarea"),(t=>!this.validateTextArea(t)));return t=t&&0===r.length,t}validateForm(t){let e=[];this.errors=[];let s=this.filter(t.getElementsByTagName("input"),(t=>!this.validateInput(t))).map((t=>this.getErrorMessages(t,t.validity))).filter((t=>0!==t.length));for(let t=0;t<s.length;++t)e=e.concat(s[t]);let r=this.filter(t.getElementsByTagName("select"),(t=>!this.validateSelect(t))).map((t=>this.getErrorMessages(t,t.validity))).filter((t=>0!==t.length));for(let t=0;t<r.length;++t)e=e.concat(r[t]);let a=this.filter(t.getElementsByTagName("textarea"),(t=>!this.validateTextArea(t))).map((t=>this.getErrorMessages(t,t.validity))).filter((t=>0!==t.length));for(let t=0;t<a.length;++t)e=e.concat(a[t]);return e}validateElement(t){let e=[];if("INPUT"!==t.tagName||this.validateInput(t))if("SELECT"!==t.tagName||this.validateSelect(t)){if("TEXTAREA"===t.tagName&&!this.validateTextArea(t)){let s=this.getErrorMessages(t,t.validity).filter((t=>0!==t.length));for(let t=0;t<s.length;++t)e=e.concat(s[t])}}else{let s=this.getErrorMessages(t,t.validity).filter((t=>0!==t.length));for(let t=0;t<s.length;++t)e=e.concat(s[t])}else{let s=this.getErrorMessages(t,t.validity).filter((t=>0!==t.length));for(let t=0;t<s.length;++t)e=e.concat(s[t])}return e}validateSelect(t){if(!t.checkValidity()){let e=this.getErrorMessages(t,t.validity);return 0!==e.length&&(this.errors=this.errors.concat(e)),!1}return!0}validateTextArea(t){if(!t.checkValidity()){let e=this.getErrorMessages(t,t.validity);return 0!==e.length&&(this.errors=this.errors.concat(e)),!1}return!0}getErrorMessages(t,e){let s=[];for(let r in this.messageAttributes)if(e[r]){let e=t.attribute(this.messageAttributes[r]);null!==e&&(s=s.concat(e))}if(0===s.length){let e=t.attribute("data-error-message");s=null!==e?s.concat(e):s.concat(t.validationMessage)}return s}validateInput(t){if(!t.checkValidity()){let e=this.getErrorMessages(t,t.validity);return 0!==e.length&&(this.errors=this.errors.concat(e)),!1}return!0}}class s{constructor(){this.params=[]}toString(){let t=this.params.length>0?"'"+this.params.join("', '")+"'":"";return this.name+"("+t+")"}}Function.prototype.trace=function(){for(var t=[],e=this;e;)t.push(e.signature()),e=e.caller;return t},Function.prototype.signature=function(){var t=new s;if(t.name=this.getName(),this.arguments)for(var e=0;e<this.arguments.length;e++)t.params.push(this.arguments[e]);return t},Function.prototype.getName=function(){if(this.name)return this.name;var t=this.toString().split("\n")[0],e=/^function ([^\s(]+).+/;return e.test(t)&&t.split("\n")[0].replace(e,"$1")||"anonymous"};class r{constructor(){this.logError=(t,e)=>{}}setLoggingFunction(t){this.logError=t}onError(t,e,s,r,a){this.logError(t,(null==a?void 0:a.stack)||"")}}class a{set(t,e){localStorage.setItem(t,e)}setObject(t,e){this.set(t,JSON.stringify(e))}get(t,e=""){return localStorage.getItem(t)||e}has(t){return null!==this.get(t,null)}remove(t){localStorage.removeItem(t)}clear(){localStorage.clear()}get length(){return localStorage.length}key(t){return localStorage.key(t)}getObject(t,e=null){let s=this.get(t);return s&&JSON.parse(s)||e}}class i{set(t,e){sessionStorage.setItem(t,e)}setObject(t,e){this.set(t,JSON.stringify(e))}get(t,e=""){return sessionStorage.getItem(t)||e}has(t){return null!==this.get(t,null)}remove(t){sessionStorage.removeItem(t)}clear(){sessionStorage.clear()}get length(){return sessionStorage.length}key(t){return sessionStorage.key(t)}getObject(t,e=null){let s=this.get(t);return s&&JSON.parse(s)||e}}class n{constructor(t,e,s){this.DBName=t,this.Version=s;let r=indexedDB.open(t,s);r.onupgradeneeded=t=>{this.database=t.target.result;for(let t=0;t<e.length;++t){let s=e[t];this.database.objectStoreNames.contains(s)&&this.database.deleteObjectStore(s),this.database.createObjectStore(s)}},r.onsuccess=t=>{this.database=t.target.result}}openDatabase(t){indexedDB.open(this.DBName,this.Version).onsuccess=e=>(this.database=e.target.result,t(this))}add(t,e,s){this.database.transaction(t,"readwrite").objectStore(t).put(e,s)}remove(t,e){this.database.transaction(t,"readwrite").objectStore(t).delete(e)}getByKey(t,e,s){this.database.transaction(t,"readwrite").objectStore(t).get(e).onsuccess=s}getKeys(t,e){this.database.transaction(t,"readwrite").objectStore(t).getAllKeys().onsuccess=e}get(t,e,s){this.database.transaction(t,"readwrite").objectStore(t).get(e).onsuccess=s}getAll(t,e,s){this.database.transaction(t,"readwrite").objectStore(t).getAll(s).onsuccess=e}}class l{constructor(t,e,s){this.url=e,this.method=t.toUpperCase(),this.data=s,this.headers=new Headers,"GET"!==this.method&&"HEAD"!==this.method&&"DELETE"!==this.method&&"TRACE"!==this.method&&this.type("application/json"),this.accept("application/json"),this.parser=t=>t.json(),this.serializer=t=>JSON.stringify(t),this.storageMode=h.NetworkOnly,this.databaseName="MithrilStorage",this.cacheKey=this.url+this.serializer(this.data),this.credentials="same-origin"}static get(t,e){return l.makeRequest("GET",t,e)}static makeRequest(t,e,s){return new l(t,e,s)}static post(t,e){return l.makeRequest("POST",t,e)}static put(t,e){return l.makeRequest("PUT",t,e)}static delete(t,e){return l.makeRequest("DELETE",t,e)}onSuccess(t){return this.success=t,this}onError(t){return this.error=t,this}setHeader(t,e){return this.headers.set(t,e),this}setCacheKey(t){return this.cacheKey=t,this}setCredentials(t){return this.credentials=t,this}type(t){return this.setHeader("Content-Type",t)}accept(t){return this.setHeader("Accept",t)}setParser(t){return this.parser=t,this}setMode(t,e="MithrilStorage"){return this.databaseName=e,this.storageMode=t,this}setSerializer(t){return this.serializer=t,this}send(){void 0!==this.error&&null!==this.error||(this.error=t=>{}),void 0!==this.success&&null!==this.success||(this.success=t=>{});let t=this.serializer(this.data);return this.storageMode===h.StorageFirst?(l.returnValueFromDB(this.cacheKey,this.databaseName,this.success),void this.queryNetwork(t,this.cacheKey,this.databaseName,(t=>{}),(t=>{l.saveValueToDB(t,this.cacheKey,this.databaseName)}))):this.storageMode===h.StorageAndUpdate?(l.returnValueFromDB(this.cacheKey,this.databaseName,this.success),void this.queryNetwork(t,this.cacheKey,this.databaseName,(t=>{}),(t=>{l.saveValueToDB(t,this.cacheKey,this.databaseName),this.success(t)}))):void(this.storageMode!==h.NetworkFirst?this.queryNetwork(t,this.cacheKey,this.databaseName,(t=>{}),this.success):this.queryNetwork(t,this.cacheKey,this.databaseName,this.success,(t=>{l.saveValueToDB(t,this.cacheKey,this.databaseName),this.success(t)})))}static saveValueToDB(t,e,s){new n(s,["cache","cacheExpirations"],1).openDatabase((s=>{void 0!==t&&(s.add("cache",t,e),s.add("cacheExpirations",Date.now(),e))}))}queryNetwork(t,e,s,r,a){navigator.onLine?fetch(this.url,{credentials:this.credentials,method:this.method,body:t,headers:this.headers}).then(this.parser).then(a).catch(this.error):this.storageMode===h.NetworkFirst&&l.returnValueFromDB(e,s,r)}static returnValueFromDB(t,e,s){new n(e,["cache","cacheExpirations"],1).openDatabase((e=>{e.getByKey("cache",t,(t=>{let e=t.target.result;void 0!==e&&s(e)}))}))}}var h,o;!function(t){t[t.NetworkFirst=0]="NetworkFirst",t[t.StorageFirst=1]="StorageFirst",t[t.NetworkOnly=2]="NetworkOnly",t[t.StorageAndUpdate=3]="StorageAndUpdate"}(h||(h={}));class u{}u.keyMappings={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46,META:91,"*":106,"+":107,MINUS:109,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145,";":186,"=":187,"":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};class c{constructor(t){this.keys=this.getKeys(t)}getKeys(t){return t.toUpperCase().split(/-(?!$)/).map((t=>u.keyMappings[t]||t.charCodeAt(0)))}isPressed(t){let e=t;if(e.length!==this.keys.length)return!1;for(let t=0;t<e.length;++t)if(-1===this.keys.indexOf(e[t]))return!1;return!0}}class g{constructor(t,e){this.keyCodeSequence=t.toUpperCase(),this.keyCodes=t.toUpperCase().split(" ").map((t=>new c(t))),this.callback=e,this.length=this.keyCodes.length,this.isDefault="<*>"===t}call(t,e,s){return this.callback(e,{scope:s,keysPressed:t}),!0}press(t,e,s){let r=t;if(r.length!==this.length)return!1;for(let t=0;t<this.keyCodes.length;++t)if(!this.keyCodes[t].isPressed(r[t]))return!1;return this.call(t,e,s)}isPartial(t){let e=t;if(e.length>this.length)return!1;for(let t=0;t<e.length;++t)if(!this.keyCodes[t].isPressed(e[t]))return!1;return!0}}class d{constructor(t){this.name=t,this.sequences=[]}press(t,e){this.sequences=this.sequences.sort(((t,e)=>t.length>e.length?1:-1));for(let s=0;s<this.sequences.length;++s)if(this.sequences[s].press(t,e,this))return!0;return!1}callDefault(t,e){let s=this.sequences.filter((t=>t.isDefault));return 0!==s.length&&s[0].call(t,e,this)}isPartial(t){for(let e=0;e<this.sequences.length;++e)if(this.sequences[e].isPartial(t))return!0;return!1}addSequence(t,e){return this.removeSequence(t),this.sequences.push(new g(t,e)),this}removeSequence(t){return this.sequences=this.sequences.filter((e=>e.keyCodeSequence!==t.toUpperCase())),this}clear(){return this.sequences=[],this}}class p{constructor(){this.scopes={},this.scopes.Default=new d("Default"),this.currentScope=this.scopes.Default,this.filter=t=>{let e=(t.target||t.srcElement).tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},this.latestKeys=[]}setScope(t){let e=this.addScope(t);return this.currentScope=e,e}addScope(t){let e=this.scopes[t];return void 0!==e||(e=new d(t),this.scopes[t]=e),e}removeScope(t){return this.scopes[t]=void 0,"Default"===t&&(this.scopes.Default=new d("Default")),this.currentScope.name===t&&(this.currentScope=this.scopes.Default),this}clear(){return this.scopes={},this.scopes.Default=new d("Default"),this.currentScope=this.scopes.Default,this.latestKeys=[],this}bind(t,e){return this.currentScope.addSequence(t,e),this}unbind(t){return this.currentScope.removeSequence(t),this}press(t){if(!this.filter(t))return;let e=this.getKeys(t);this.latestKeys.push(e);let s=this.latestKeys.slice();if(this.currentScope.press(this.latestKeys,t))this.latestKeys=[];else{for(;this.latestKeys.length>0;){if(this.currentScope.isPartial(this.latestKeys))return;this.latestKeys.shift()}0===this.latestKeys.length&&this.currentScope.callDefault(s,t)}}getKeys(t){let e=[];return t.altKey&&e.push(u.keyMappings.ALT),t.ctrlKey&&e.push(u.keyMappings.CTRL),t.metaKey&&e.push(u.keyMappings.META),t.shiftKey&&e.push(u.keyMappings.SHIFT),-1===e.indexOf(t.keyCode)&&e.push(t.keyCode),e}}class f{}class m{constructor(t,e){this.variable="{"===t.charAt(0)&&"}"===t.charAt(t.length-1),t=t.replace(/[{}]/g,""),this.optional="^"===t.charAt(0),this.part=t.replace(/[\^]/g,""),void 0!==e[this.part]?this.defaultValue=e[this.part]:this.defaultValue=""}isMatch(t){return null==t?this.optional:this.variable?this.optional||""!==t:this.optional||t.toUpperCase()===this.part.toUpperCase()}getValue(t){return this.variable?void 0!==t&&t||this.defaultValue:t||this.defaultValue}setValue(t,e){this.getValue(t),e[this.part]=this.getValue(t)}}class y{constructor(t,e){let s=t.split("=",2);this.key=s[0],t=s[1],this.variable="{"===t.charAt(0)&&"}"===t.charAt(t.length-1),t=t.replace(/[{}]/g,""),this.optional="^"===t.charAt(0),this.part=t.replace(/[\^]/g,""),void 0!==e[this.part]?this.defaultValue=e[this.part]:this.defaultValue=""}isMatch(t){if(null==t)return!1;let e=t.split("=",2);return 2===e.length&&(this.key.toUpperCase()===e[0].toUpperCase()&&(void 0===(t=e[1])?this.optional:this.variable?this.optional||""!==t:this.optional||t.toUpperCase()===this.part.toUpperCase()))}getValue(t){if(null==t)return this.defaultValue;let e=t.split("=",2);return 2!==e.length?this.defaultValue:(t=e[1],this.variable?void 0!==t&&t||this.defaultValue:t||this.defaultValue)}setValue(t,e){this.getValue(t),e[this.key]=this.getValue(t)}}class v{constructor(t,e){t=t.replace(/[#!]/g,""),this.variable="{"===t.charAt(0)&&"}"===t.charAt(t.length-1),t=t.replace(/[{}]/g,""),this.optional="^"===t.charAt(0),this.part=t.replace(/[\^]/g,""),void 0!==e[this.part]?this.defaultValue=e[this.part]:this.defaultValue=""}isMatch(t){return null==t?this.optional:(t=t.replace(/[#!]/g,""),this.variable?this.optional||""!==t:this.optional||t.toUpperCase()===this.part.toUpperCase())}getValue(t){return this.variable?void 0!==t&&t||this.defaultValue:t||this.defaultValue}setValue(t,e){t=(t=t||"").replace(/[#!]/g,""),e[this.part]=this.getValue(t)}}class E{constructor(t,e,s){void 0===s&&(s=new f),this.url=this.fixUrl(t),this.pathParts=this.getPathParts(this.url).map((t=>new m(t,s))),this.pathParts=this.pathParts?this.pathParts:[],this.queryParts=this.getQueryParts(this.url).map((t=>new y(t,s))),this.queryParts=this.queryParts?this.queryParts:[],this.hashParts=this.getHashParts(this.url).map((t=>new v(t,s))),this.hashParts=this.hashParts?this.hashParts:[],this.callbacks=[e],this.defaultValues=s}isRoute(t){return this.url===this.fixUrl(t)}addCallback(t){this.callbacks.push(t)}removeCallback(t){this.callbacks=this.callbacks.filter((e=>e!==t))}fixUrl(t){return t.length?t.replace(/^\//,"").replace(/\/+/g,"/").replace(/^\/|\/($|\?)/,"").replace(/\/\#/g,"#"):t}getPathParts(t){return t.split("?",2)[0].split("#",2)[0].split("/")}getHashParts(t){let e=t.split("?",2)[0].split("#",2);return e.length<2?[]:[e[1].replace("!","")]}getQueryParts(t){let e=t.split("?",2);return e.length<2?[]:(t=e[1])?t.split("&"):[]}getParametersFromUrl(t,e,s){let r=new f;for(let e=0;e<t.length;++e)this.pathParts[e].setValue(t[e],r);for(let t=0;t<e.length;++t)this.queryParts[t].setValue(e[t],r);for(let t=0;t<s.length;++t)this.hashParts[t].setValue(s[t],r);if(this.pathParts.length>t.length)for(let e=t.length;e<this.pathParts.length;++e)this.pathParts[e].setValue("",r);if(this.queryParts.length>e.length)for(let t=e.length;t<this.queryParts.length;++t)this.queryParts[t].setValue("",r);if(this.hashParts.length>s.length)for(let t=s.length;t<this.hashParts.length;++t)this.hashParts[t].setValue("",r);return r}isMatch(t,e,s){if(this.pathParts.length<t.length)return!1;for(let e=0;e<t.length;++e)if(!this.pathParts[e].isMatch(t[e]))return!1;if(this.pathParts.length>t.length)for(let e=t.length;e<this.pathParts.length;++e)if(!this.pathParts[e].isMatch(""))return!1;if(this.queryParts.length<e.length)return!1;for(let t=0;t<e.length;++t)if(!this.queryParts[t].isMatch(e[t]))return!1;if(this.queryParts.length>e.length)for(let t=e.length;t<this.queryParts.length;++t)if(!this.queryParts[t].isMatch(""))return!1;if(this.hashParts.length<s.length)return!1;for(let t=0;t<s.length;++t)if(!this.hashParts[t].isMatch(s[t]))return!1;if(this.hashParts.length>s.length)for(let t=s.length;t<this.hashParts.length;++t)if(!this.hashParts[t].isMatch(""))return!1;return!0}run(t){t=this.fixUrl(t);let e=this.getPathParts(t),s=this.getQueryParts(t),r=this.getHashParts(t);if(!this.isMatch(e,s,r))return!1;let a=this.getParametersFromUrl(e,s,r);return a.url=t,this.callbacks.forEach((t=>t(a))),!0}}class b{constructor(){this.routes=[]}map(t){for(let e=0;e<t.length;++e)this.addRoute(t[e].url,t[e].action,t[e].defaultValues)}addRoute(t,e,s){let r=this.routes.filter((e=>e.isRoute(t)));return 0===r.length?this.routes.push(new E(t,e,s)):r[0].addCallback(e),this}run(t){for(let e=0;e<this.routes.length;++e)if(this.routes[e].run(t))return!0;return!1}}class S{back(t){void 0===t&&(t=1),window.history.go(-1*t)}forward(t){void 0===t&&(t=1),window.history.go(t)}push(t,e,s){window.history.pushState(t,s,e)}replace(t,e,s){window.history.replaceState(t,s,e)}get state(){return window.history.state}get length(){return window.history.length}}!function(t){t[t.CSV=0]="CSV"}(o||(o={}));class w{constructor(){this.validation=new e,this.errorLogger=new r,this.localStorage=new a,this.sessionStorage=new i,this.hotkeys=new p,this.router=new b,this.history=new S,window.addEventListener("keydown",(t=>this.hotkeys.press(t))),window.addEventListener("load",(t=>this.validation.initialize()),!1),window.onerror=(t,e,s,r,a)=>{this.errorLogger.onError(t.toString(),e,s,r,a)},this.errorLogger.setLoggingFunction(((t,e)=>{console.log(t)}))}}let C={bind:function(t){C.onEventBound=C.onEvent.bind({el:t}),document.addEventListener("click",C.onEventBound)},cb:function(t){},onEvent:function(t){(t.target===this.el||this.el.contains(t.target)||C.cb)&&C.cb(t)},onEventBound:function(){},unbind:function(){document.removeEventListener("click",C.onEventBound)},update:function(t,e){if("function"!=typeof e.value)throw new Error("Argument must be a function");C.cb=e.value}};class P{constructor(){this.framework=new w,this.setupLogging()}SetupComponents(e){return function(e){null==e||(e.config.globalProperties.$filters={moment:function(e,s,r){return null==e?"N/A":(null!=r||(r="YYYY-MM-DDThh:mm:ss"),null!=s||(s="M-D-YYYY h:mm A"),t(e,r).format(s))},capitalize:function(t){return null==t?"":t.charAt(0).toUpperCase()+t.slice(1)},maxsize:function(t,e,s){return null==t?"":t.length<=e?t:(null!=s||(s="..."),t.substring(0,e)+s)},currency:function(t,e,s){return null==t?"":(null!=e||(e="en-US"),null!=s||(s={style:"currency",currency:"USD"}),Intl.NumberFormat(e,s).format(t))}})}(e),function(t){return t.directive("click-outside",C),t}(e)}setupLogging(){var t=!1;this.framework.errorLogger.setLoggingFunction((function(e,s){if(null!==e&&!t){t=!0;var r=e;r+=": at document path '"+document.location+"'.",null!==s&&(r+="\n at "+s),l.post("API/Command/v1/Log",{logLevel:"Error",message:r}).send()}}))}}class k{constructor(){this.Core=new P}}new k}));
//# sourceMappingURL=site.umd.min.js.map

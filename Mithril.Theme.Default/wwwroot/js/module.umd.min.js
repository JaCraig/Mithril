(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("moment"),require("vue")):typeof define=="function"&&define.amd?define(["exports","moment","vue"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.themedefault={},o.moment,o.Vue))})(this,function(o,c,l){"use strict";var ae=Object.defineProperty;var ne=(o,c,l)=>c in o?ae(o,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[c]=l;var P=(o,c,l)=>(ne(o,typeof c!="symbol"?c+"":c,l),l);HTMLElement.prototype.getParentByClass=function(i){let e=this.parentElement;for(;e&&!e.hasClass(i);)e=e.parentElement;return e},HTMLElement.prototype.hasClass=function(i){return(" "+this.className+" ").indexOf(" "+i+" ")>-1},HTMLElement.prototype.replaceClass=function(i,e){let t=" "+this.className+" ";if(t.indexOf(i)===-1){this.addClass(e);return}e===""?this.className=t.replace(new RegExp(" "+i+" ","gi")," ").trim():this.className=t.replace(new RegExp(" "+i+" ","gi")," "+e+" ").trim()},HTMLElement.prototype.toggleClass=function(i,e){if(this.hasClass(i)){this.replaceClass(i,e);return}this.replaceClass(e,i)},HTMLElement.prototype.removeClass=function(i){this.replaceClass(i,"")},HTMLElement.prototype.addClass=function(i){this.hasClass(i)||(this.className+=" "+i)},HTMLElement.prototype.show=function(){this.replaceClass("hidden","show"),this.addClass("show")},HTMLElement.prototype.hide=function(){this.replaceClass("show","hidden"),this.addClass("hidden")},HTMLElement.prototype.attribute=function(i,e=null){return e!=null?(this.setAttribute(i,e),e):this.getAttribute(i)},NodeList.prototype.map=function(i){let e=[];for(let t=0;t<this.length;++t)e=e.concat(i(this[t]));return e},NodeList.prototype.filter=function(i){let e=[];for(let t=0;t<this.length;++t)i(this[t])&&(e=e.concat(this[t]));return e};class T{constructor(){this.errors=[],this.messageAttributes={},this.messageAttributes.patternMismatch="data-error-message-pattern-mismatch",this.messageAttributes.rangeOverflow="data-error-message-range-overflow",this.messageAttributes.rangeUnderflow="data-error-message-range-underflow",this.messageAttributes.stepMismatch="data-error-message-step-mismatch",this.messageAttributes.tooLong="data-error-message-too-long",this.messageAttributes.tooShort="data-error-message-too-short",this.messageAttributes.badInput="data-error-message-bad-input",this.messageAttributes.typeMismatch="data-error-message-type-mismatch",this.messageAttributes.valueMissing="data-error-message-value-missing"}initialize(){let e=this.map(document.getElementsByTagName("input"),s=>s).filter(s=>s.willValidate);for(let s=0;s<e.length;++s)e[s].type.toUpperCase()==="RADIO"||e[s].type.toUpperCase()==="CHECKBOX"?e[s].addEventListener("change",a=>this.inputHandler(a.target)):e[s].addEventListener("input",a=>this.inputHandler(a.target)),e[s].addEventListener("invalid",a=>this.invalidInputHandler(a.target));let t=this.map(document.getElementsByTagName("textarea"),s=>s).filter(s=>s.willValidate);for(let s=0;s<t.length;++s)t[s].addEventListener("change",a=>this.textAreaHandler(a.target)),t[s].addEventListener("invalid",a=>this.invalidTextAreaHandler(a.target));let r=this.map(document.getElementsByTagName("select"),s=>s).filter(s=>s.willValidate);for(let s=0;s<r.length;++s)r[s].addEventListener("change",a=>this.selectHandler(a.target)),r[s].addEventListener("invalid",a=>this.invalidSelectHandler(a.target))}map(e,t){let r=[];for(let s=0;s<e.length;++s)r=r.concat(t(e[s]));return r}filter(e,t){let r=[];for(let s=0;s<e.length;++s)t(e[s])&&(r=r.concat(e[s]));return r}initializeForm(e){let t=this.map(e.getElementsByTagName("input"),a=>a).filter(a=>a.willValidate);for(let a=0;a<t.length;++a)t[a].type.toUpperCase()==="RADIO"||t[a].type.toUpperCase()==="CHECKBOX"?t[a].addEventListener("change",n=>this.inputHandler(n.target)):t[a].addEventListener("input",n=>this.inputHandler(n.target)),t[a].addEventListener("invalid",n=>this.invalidInputHandler(n.target));let r=this.map(e.getElementsByTagName("textarea"),a=>a).filter(a=>a.willValidate);for(let a=0;a<r.length;++a)r[a].addEventListener("change",n=>this.textAreaHandler(n.target)),r[a].addEventListener("invalid",n=>this.invalidTextAreaHandler(n.target));let s=this.map(e.getElementsByTagName("select"),a=>a).filter(a=>a.willValidate);for(let a=0;a<s.length;++a)s[a].addEventListener("change",n=>this.selectHandler(n.target)),s[a].addEventListener("invalid",n=>this.invalidSelectHandler(n.target))}invalidInputHandler(e){if(!e.validity.valid){let t=this.getErrorMessages(e,e.validity);t.length>0&&e.setCustomValidity(t.join(`
`))}}invalidTextAreaHandler(e){if(!e.validity.valid){let t=this.getErrorMessages(e,e.validity);t.length>0&&e.setCustomValidity(t.join(`
`))}}invalidSelectHandler(e){if(!e.validity.valid){let t=this.getErrorMessages(e,e.validity);t.length>0&&e.setCustomValidity(t.join(`
`))}}inputHandler(e){if(e.type.toUpperCase()==="RADIO"){let t=document.getElementsByName(e.name);for(let r=0;r<t.length;++r)t[r].setCustomValidity("")}else e.setCustomValidity("");e.checkValidity()}textAreaHandler(e){e.setCustomValidity(""),e.checkValidity()}selectHandler(e){e.setCustomValidity(""),e.checkValidity()}validate(){let e=!0;this.errors=[];let t=this.filter(document.getElementsByTagName("input"),a=>!this.validateInput(a));e=e&&t.length===0;let r=this.filter(document.getElementsByTagName("select"),a=>!this.validateSelect(a));e=e&&r.length===0;let s=this.filter(document.getElementsByTagName("textarea"),a=>!this.validateTextArea(a));return e=e&&s.length===0,e}validateForm(e){let t=[];this.errors=[];let r=this.filter(e.getElementsByTagName("input"),n=>!this.validateInput(n)).map(n=>this.getErrorMessages(n,n.validity)).filter(n=>n.length!==0);for(let n=0;n<r.length;++n)t=t.concat(r[n]);let s=this.filter(e.getElementsByTagName("select"),n=>!this.validateSelect(n)).map(n=>this.getErrorMessages(n,n.validity)).filter(n=>n.length!==0);for(let n=0;n<s.length;++n)t=t.concat(s[n]);let a=this.filter(e.getElementsByTagName("textarea"),n=>!this.validateTextArea(n)).map(n=>this.getErrorMessages(n,n.validity)).filter(n=>n.length!==0);for(let n=0;n<a.length;++n)t=t.concat(a[n]);return t}validateElement(e){let t=[];if(e.tagName==="INPUT"&&!this.validateInput(e)){let r=this.getErrorMessages(e,e.validity).filter(s=>s.length!==0);for(let s=0;s<r.length;++s)t=t.concat(r[s])}else if(e.tagName==="SELECT"&&!this.validateSelect(e)){let r=this.getErrorMessages(e,e.validity).filter(s=>s.length!==0);for(let s=0;s<r.length;++s)t=t.concat(r[s])}else if(e.tagName==="TEXTAREA"&&!this.validateTextArea(e)){let r=this.getErrorMessages(e,e.validity).filter(s=>s.length!==0);for(let s=0;s<r.length;++s)t=t.concat(r[s])}return t}validateSelect(e){if(!e.checkValidity()){let t=this.getErrorMessages(e,e.validity);return t.length!==0&&(this.errors=this.errors.concat(t)),!1}return!0}validateTextArea(e){if(!e.checkValidity()){let t=this.getErrorMessages(e,e.validity);return t.length!==0&&(this.errors=this.errors.concat(t)),!1}return!0}getErrorMessages(e,t){let r=[];for(let s in this.messageAttributes)if(t[s]){let a=e.attribute(this.messageAttributes[s]);a!==null&&(r=r.concat(a))}if(r.length===0){let s=e.attribute("data-error-message");s!==null?r=r.concat(s):r=r.concat(e.validationMessage)}return r}validateInput(e){if(!e.checkValidity()){let t=this.getErrorMessages(e,e.validity);return t.length!==0&&(this.errors=this.errors.concat(t)),!1}return!0}}class M{constructor(){this.params=[]}toString(){let e=this.params.length>0?"'"+this.params.join("', '")+"'":"";return this.name+"("+e+")"}}Function.prototype.trace=function(){for(var i=[],e=this;e;)i.push(e.signature()),e=e.caller;return i},Function.prototype.signature=function(){var i=new M;if(i.name=this.getName(),this.arguments)for(var e=0;e<this.arguments.length;e++)i.params.push(this.arguments[e]);return i},Function.prototype.getName=function(){if(this.name)return this.name;var i=this.toString().split(`
`)[0],e=/^function ([^\s(]+).+/;return e.test(i)&&i.split(`
`)[0].replace(e,"$1")||"anonymous"};class L{constructor(){this.logError=(e,t)=>{}}setLoggingFunction(e){this.logError=e}onError(e,t,r,s,a){this.logError(e,(a==null?void 0:a.stack)||"")}}class N{set(e,t){localStorage.setItem(e,t)}setObject(e,t){this.set(e,JSON.stringify(t))}get(e,t=""){return localStorage.getItem(e)||t}has(e){return this.get(e,null)!==null}remove(e){localStorage.removeItem(e)}clear(){localStorage.clear()}get length(){return localStorage.length}key(e){return localStorage.key(e)}getObject(e,t=null){let r=this.get(e);return r&&JSON.parse(r)||t}}class x{set(e,t){sessionStorage.setItem(e,t)}setObject(e,t){this.set(e,JSON.stringify(t))}get(e,t=""){return sessionStorage.getItem(e)||t}has(e){return this.get(e,null)!==null}remove(e){sessionStorage.removeItem(e)}clear(){sessionStorage.clear()}get length(){return sessionStorage.length}key(e){return sessionStorage.key(e)}getObject(e,t=null){let r=this.get(e);return r&&JSON.parse(r)||t}}class w{constructor(e,t,r){this.DBName=e,this.Version=r;let s=indexedDB.open(e,r);s.onupgradeneeded=a=>{this.database=a.target.result;for(let n=0;n<t.length;++n){let u=t[n];this.database.objectStoreNames.contains(u)&&this.database.deleteObjectStore(u),this.database.createObjectStore(u)}},s.onsuccess=a=>{this.database=a.target.result}}openDatabase(e){let t=indexedDB.open(this.DBName,this.Version);t.onsuccess=r=>(this.database=r.target.result,e(this))}add(e,t,r){this.database.transaction(e,"readwrite").objectStore(e).put(t,r)}remove(e,t){this.database.transaction(e,"readwrite").objectStore(e).delete(t)}getByKey(e,t,r){let s=this.database.transaction(e,"readwrite").objectStore(e).get(t);s.onsuccess=r}getKeys(e,t){let r=this.database.transaction(e,"readwrite").objectStore(e).getAllKeys();r.onsuccess=t}get(e,t,r){let s=this.database.transaction(e,"readwrite").objectStore(e).get(t);s.onsuccess=r}getAll(e,t,r){let s=this.database.transaction(e,"readwrite").objectStore(e).getAll(r);s.onsuccess=t}}class h{constructor(e,t,r){this.url=t,this.method=e.toUpperCase(),this.data=r,this.headers=new Headers,this.method!=="GET"&&this.method!=="HEAD"&&this.method!=="DELETE"&&this.method!=="TRACE"&&this.type("application/json"),this.accept("application/json"),this.parser=s=>s.json(),this.serializer=s=>JSON.stringify(s),this.storageMode=2,this.databaseName="MithrilStorage",this.cacheKey=this.url+this.serializer(this.data),this.credentials="same-origin"}static get(e,t){return h.makeRequest("GET",e,t)}static makeRequest(e,t,r){return new h(e,t,r)}static post(e,t){return h.makeRequest("POST",e,t)}static put(e,t){return h.makeRequest("PUT",e,t)}static delete(e,t){return h.makeRequest("DELETE",e,t)}onSuccess(e){return this.success=e,this}onError(e){return this.error=e,this}setHeader(e,t){return this.headers.set(e,t),this}setCacheKey(e){return this.cacheKey=e,this}setCredentials(e){return this.credentials=e,this}type(e){return this.setHeader("Content-Type",e)}accept(e){return this.setHeader("Accept",e)}setParser(e){return this.parser=e,this}setMode(e,t="MithrilStorage"){return this.databaseName=t,this.storageMode=e,this}setSerializer(e){return this.serializer=e,this}send(){(this.error===void 0||this.error===null)&&(this.error=t=>{}),(this.success===void 0||this.success===null)&&(this.success=t=>{});let e=this.serializer(this.data);if(this.storageMode===1){h.returnValueFromDB(this.cacheKey,this.databaseName,this.success),this.queryNetwork(e,this.cacheKey,this.databaseName,t=>{},t=>{h.saveValueToDB(t,this.cacheKey,this.databaseName)});return}if(this.storageMode===3){h.returnValueFromDB(this.cacheKey,this.databaseName,this.success),this.queryNetwork(e,this.cacheKey,this.databaseName,t=>{},t=>{h.saveValueToDB(t,this.cacheKey,this.databaseName),this.success(t)});return}if(this.storageMode===0){this.queryNetwork(e,this.cacheKey,this.databaseName,this.success,t=>{h.saveValueToDB(t,this.cacheKey,this.databaseName),this.success(t)});return}this.queryNetwork(e,this.cacheKey,this.databaseName,t=>{},this.success)}static saveValueToDB(e,t,r){new w(r,["cache","cacheExpirations"],1).openDatabase(s=>{e!==void 0&&(s.add("cache",e,t),s.add("cacheExpirations",Date.now(),t))})}queryNetwork(e,t,r,s,a){if(!navigator.onLine){this.storageMode===0&&h.returnValueFromDB(t,r,s);return}fetch(this.url,{credentials:this.credentials,method:this.method,body:e,headers:this.headers}).then(this.parser).then(a).catch(this.error)}static returnValueFromDB(e,t,r){new w(t,["cache","cacheExpirations"],1).openDatabase(s=>{s.getByKey("cache",e,a=>{let n=a.target.result;n!==void 0&&r(n)})})}}var S=(i=>(i[i.NetworkFirst=0]="NetworkFirst",i[i.StorageFirst=1]="StorageFirst",i[i.NetworkOnly=2]="NetworkOnly",i[i.StorageAndUpdate=3]="StorageAndUpdate",i))(S||{});class y{static get domain(){return window.location.protocol+"//"+window.location.host+"/"}static get isLocal(){return/^http:\/\/localhost:\d{5}\/$/.test(y.domain)}static get HashBang(){return window.location.hash.replace("#!","")}static get Id(){return window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1)}static GetQueryString(e){let t=window.location.href;var r=new RegExp("[?&]"+e+"=([^&#]*)","i"),s=r.exec(t);return s?s[1]:null}static setPageTitle(e){document.title=e}}class m{}m.keyMappings={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46,META:91,"*":106,"+":107,MINUS:109,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145,";":186,"=":187,"":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};class B{constructor(e){this.keys=this.getKeys(e)}getKeys(e){return e.toUpperCase().split(/-(?!$)/).map(t=>m.keyMappings[t]||t.charCodeAt(0))}isPressed(e){let t=e;if(t.length!==this.keys.length)return!1;for(let r=0;r<t.length;++r)if(this.keys.indexOf(t[r])===-1)return!1;return!0}}class H{constructor(e,t){this.keyCodeSequence=e.toUpperCase(),this.keyCodes=e.toUpperCase().split(" ").map(r=>new B(r)),this.callback=t,this.length=this.keyCodes.length,this.isDefault=e==="<*>"}call(e,t,r){return this.callback(t,{scope:r,keysPressed:e}),!0}press(e,t,r){let s=e;if(s.length!==this.length)return!1;for(let a=0;a<this.keyCodes.length;++a)if(!this.keyCodes[a].isPressed(s[a]))return!1;return this.call(e,t,r)}isPartial(e){let t=e;if(t.length>this.length)return!1;for(let r=0;r<t.length;++r)if(!this.keyCodes[r].isPressed(t[r]))return!1;return!0}}class E{constructor(e){this.name=e,this.sequences=[]}press(e,t){this.sequences=this.sequences.sort((r,s)=>r.length>s.length?1:-1);for(let r=0;r<this.sequences.length;++r)if(this.sequences[r].press(e,t,this))return!0;return!1}callDefault(e,t){let r=this.sequences.filter(s=>s.isDefault);return r.length===0?!1:r[0].call(e,t,this)}isPartial(e){for(let t=0;t<this.sequences.length;++t)if(this.sequences[t].isPartial(e))return!0;return!1}addSequence(e,t){return this.removeSequence(e),this.sequences.push(new H(e,t)),this}removeSequence(e){return this.sequences=this.sequences.filter(t=>t.keyCodeSequence!==e.toUpperCase()),this}clear(){return this.sequences=[],this}}class V{constructor(){this.scopes={},this.scopes.Default=new E("Default"),this.currentScope=this.scopes.Default,this.filter=e=>{let t=(e.target||e.srcElement).tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},this.latestKeys=[]}setScope(e){let t=this.addScope(e);return this.currentScope=t,t}addScope(e){let t=this.scopes[e];return t!==void 0||(t=new E(e),this.scopes[e]=t),t}removeScope(e){return this.scopes[e]=void 0,e==="Default"&&(this.scopes.Default=new E("Default")),this.currentScope.name===e&&(this.currentScope=this.scopes.Default),this}clear(){return this.scopes={},this.scopes.Default=new E("Default"),this.currentScope=this.scopes.Default,this.latestKeys=[],this}bind(e,t){return this.currentScope.addSequence(e,t),this}unbind(e){return this.currentScope.removeSequence(e),this}press(e){if(!this.filter(e))return;let t=this.getKeys(e);this.latestKeys.push(t);let r=this.latestKeys.slice();if(this.currentScope.press(this.latestKeys,e))this.latestKeys=[];else{for(;this.latestKeys.length>0;){if(this.currentScope.isPartial(this.latestKeys))return;this.latestKeys.shift()}this.latestKeys.length===0&&this.currentScope.callDefault(r,e)}}getKeys(e){let t=[];return e.altKey&&t.push(m.keyMappings.ALT),e.ctrlKey&&t.push(m.keyMappings.CTRL),e.metaKey&&t.push(m.keyMappings.META),e.shiftKey&&t.push(m.keyMappings.SHIFT),t.indexOf(e.keyCode)===-1&&t.push(e.keyCode),t}}class b{}class F{constructor(e,t){this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){return e==null?this.optional:(e=e,this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){return this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue}setValue(e,t){this.getValue(e),t[this.part]=this.getValue(e)}}class U{constructor(e,t){let r=e.split("=",2);this.key=r[0],e=r[1],this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){if(e==null)return!1;let t=e.split("=",2);return t.length!==2||this.key.toUpperCase()!==t[0].toUpperCase()?!1:(e=t[1],e===void 0?this.optional:this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){if(e==null)return this.defaultValue;let t=e.split("=",2);return t.length!==2?this.defaultValue:(e=t[1],this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue)}setValue(e,t){this.getValue(e),t[this.key]=this.getValue(e)}}class K{constructor(e,t){e=e.replace(/[#!]/g,""),this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){return e==null?this.optional:(e=e.replace(/[#!]/g,""),this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){return this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue}setValue(e,t){e=e||"",e=e.replace(/[#!]/g,""),t[this.part]=this.getValue(e)}}class q{constructor(e,t,r){r===void 0&&(r=new b),this.url=this.fixUrl(e),this.pathParts=this.getPathParts(this.url).map(s=>new F(s,r)),this.pathParts=this.pathParts?this.pathParts:[],this.queryParts=this.getQueryParts(this.url).map(s=>new U(s,r)),this.queryParts=this.queryParts?this.queryParts:[],this.hashParts=this.getHashParts(this.url).map(s=>new K(s,r)),this.hashParts=this.hashParts?this.hashParts:[],this.callbacks=[t],this.defaultValues=r}isRoute(e){return this.url===this.fixUrl(e)}addCallback(e){this.callbacks.push(e)}removeCallback(e){this.callbacks=this.callbacks.filter(t=>t!==e)}fixUrl(e){return e.length?e.replace(/^\//,"").replace(/\/+/g,"/").replace(/^\/|\/($|\?)/,"").replace(/\/\#/g,"#"):e}getPathParts(e){return e.split("?",2)[0].split("#",2)[0].split("/")}getHashParts(e){let t=e.split("?",2)[0].split("#",2);return t.length<2?[]:[t[1].replace("!","")]}getQueryParts(e){let t=e.split("?",2);return t.length<2?[]:(e=t[1],e?e.split("&"):[])}getParametersFromUrl(e,t,r){let s=new b;for(let a=0;a<e.length;++a)this.pathParts[a].setValue(e[a],s);for(let a=0;a<t.length;++a)this.queryParts[a].setValue(t[a],s);for(let a=0;a<r.length;++a)this.hashParts[a].setValue(r[a],s);if(this.pathParts.length>e.length)for(let a=e.length;a<this.pathParts.length;++a)this.pathParts[a].setValue("",s);if(this.queryParts.length>t.length)for(let a=t.length;a<this.queryParts.length;++a)this.queryParts[a].setValue("",s);if(this.hashParts.length>r.length)for(let a=r.length;a<this.hashParts.length;++a)this.hashParts[a].setValue("",s);return s}isMatch(e,t,r){if(this.pathParts.length<e.length)return!1;for(let s=0;s<e.length;++s)if(!this.pathParts[s].isMatch(e[s]))return!1;if(this.pathParts.length>e.length){for(let s=e.length;s<this.pathParts.length;++s)if(!this.pathParts[s].isMatch(""))return!1}if(this.queryParts.length<t.length)return!1;for(let s=0;s<t.length;++s)if(!this.queryParts[s].isMatch(t[s]))return!1;if(this.queryParts.length>t.length){for(let s=t.length;s<this.queryParts.length;++s)if(!this.queryParts[s].isMatch(""))return!1}if(this.hashParts.length<r.length)return!1;for(let s=0;s<r.length;++s)if(!this.hashParts[s].isMatch(r[s]))return!1;if(this.hashParts.length>r.length){for(let s=r.length;s<this.hashParts.length;++s)if(!this.hashParts[s].isMatch(""))return!1}return!0}run(e){e=this.fixUrl(e);let t=this.getPathParts(e),r=this.getQueryParts(e),s=this.getHashParts(e);if(!this.isMatch(t,r,s))return!1;let a=this.getParametersFromUrl(t,r,s);return a.url=e,this.callbacks.forEach(n=>n(a)),!0}}class O{constructor(){this.routes=[]}map(e){for(let t=0;t<e.length;++t)this.addRoute(e[t].url,e[t].action,e[t].defaultValues)}addRoute(e,t,r){let s=this.routes.filter(a=>a.isRoute(e));return s.length===0?this.routes.push(new q(e,t,r)):s[0].addCallback(t),this}run(e){for(let t=0;t<this.routes.length;++t)if(this.routes[t].run(e))return!0;return!1}}class I{back(e){e===void 0&&(e=1),window.history.go(-1*e)}forward(e){e===void 0&&(e=1),window.history.go(e)}push(e,t,r){window.history.pushState(e,r,t)}replace(e,t,r){window.history.replaceState(e,r,t)}get state(){return window.history.state}get length(){return window.history.length}}class j{static exportData(e,t,r=y.Id,s=0){if(e.length==0)return;r=r||y.Id;let a="";s===0?a=this.exportCSV(e,t,r):a=e.join(","),this.download(a,r)}static capitalize(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}static exportCSV(e,t,r){var u,A;let s="",a=Object.keys(e[0]),n="";for(let g=0;g<a.length;++g){let f=a[g],p=t.filter(function(ie){return ie.property===f});p.length===0&&(p=[{display:f,property:f}]);let v=((u=p[0])==null?void 0:u.display)||((A=p[0])==null?void 0:A.property)||f;s+=n+'"'+this.capitalize(v)+'"',n=","}s+=`
`;for(let g=0;g<e.length;++g){let f=e[g],p=Object.keys(f);n="";for(let v=0;v<p.length;++v)s+=n+'"'+f[p[v]].replaceAll('"',"'")+'"',n=",";s+=`
`}return s}static download(e,t){if(e!=null){if(navigator.msSaveBlob){navigator.msSaveBlob(new Blob([e]),t);return}var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}class R{constructor(){this.validation=new T,this.errorLogger=new L,this.localStorage=new N,this.sessionStorage=new x,this.hotkeys=new V,this.router=new O,this.history=new I,window.addEventListener("keydown",e=>this.hotkeys.press(e)),window.addEventListener("load",e=>this.validation.initialize(),!1),window.onerror=(e,t,r,s,a)=>{this.errorLogger.onError(e.toString(),t,r,s,a)},this.errorLogger.setLoggingFunction((e,t)=>{console.log(e)})}}let d={mounted:function(i,e){if(d.onEventBound=d.onEvent.bind({el:i}),document.addEventListener("click",d.onEventBound),typeof e.value!="function")throw new Error("Argument must be a function");d.cb=e.value},cb:function(i){},onEvent:function(i){i.target===this.el||this.el.contains(i.target)||!d.cb||d.cb(i)},onEventBound:function(){},unbind:function(){document.removeEventListener("click",d.onEventBound)},update:function(i,e){if(typeof e.value!="function")throw new Error("Argument must be a function");d.cb=e.value}};function z(i){return i.directive("click-outside",d),i}function $(i){return i==null||(i.config.globalProperties.$filters={moment:function(e,t,r){return e==null?"N/A":(r??(r="YYYY-MM-DDThh:mm:ss"),t??(t="M-D-YYYY h:mm A"),c(e,r).format(t))},capitalize:function(e){return e==null?"":e.charAt(0).toUpperCase()+e.slice(1)},maxsize:function(e,t,r){return e==null?"":e.length<=t?e:(r??(r="..."),e.substring(0,t)+r)},currency:function(e,t,r){return e==null?"":(t??(t="en-US"),r??(r={style:"currency",currency:"USD"}),Intl.NumberFormat(t,r).format(e))}}),i}class D{}String.prototype.slugify=function(){return this.trim().replace(/ /g,"-").replace(/-{2,}/g,"-").replace(/^-+|-+$/g,"").replace(/([^a-zA-Z0-9-_/./:]+)/g,"")},String.prototype.stripHTML=function(){let i=document.createElement("div");return i.innerHTML=this,(i.textContent||i.innerText||"").replace(/^\s+|\s+$/g,"")},String.prototype.toNumber=function(){return this==null?0:parseFloat(this.stripHTML().replace(/[^0-9.-]/g,""))};const Y=l.defineComponent({name:"DataHandler",data:function(){return{count:0,timer:0,internalData:this.model}},props:{model:{type:Object,default:{}},schema:{type:D,default:new D}},methods:{fetchData:function(){if(!this.schema.loadUrl)return;let i=this;h.post("/api/query",{query:i.schema.datalistQuery}).onSuccess(e=>{i.schema.datalist=e.data.dropDown}).setMode(S.StorageAndUpdate).send()},saveData:function(){},deleteData:function(){}},created:function(){if(!this.schema.datalistQuery)return;this.fetchData()},watch:{model:function(i,e){e!==i&&(this.internalModel=i)}}}),k=(i,e)=>{const t=i.__vccOpts||i;for(const[r,s]of e)t[r]=s;return t};function G(i,e,t,r,s,a){return l.openBlock(),l.createElementBlock("div",null,[l.createTextVNode(" ASDF "),(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(i.schema.children,n=>(l.openBlock(),l.createBlock(l.resolveDynamicComponent(n.type),{key:n.type,data:i.internalData,schema:n,onSave:i.saveData,onDelete:i.deleteData,onLoad:i.fetchData},null,40,["data","schema","onSave","onDelete","onLoad"]))),128)),l.createElementVNode("pre",null,l.toDisplayString(i.internalData),1)])}const Q=k(Y,[["render",G]]),J=l.defineComponent({data:function(){return{items:this.items,showDropDown:!1}},props:{items:Array},methods:{showDropDownFunc:function(){this.showDropDown=!0},hideDropDownFunc:function(){this.showDropDown=!1}},directives:{clickOutside:d}}),X={class:"unstyled"},W={class:"grouped"},Z=["href"];function _(i,e,t,r,s,a){const n=l.resolveDirective("click-outside");return l.withDirectives((l.openBlock(),l.createElementBlock("ul",X,[l.createElementVNode("li",null,[l.createElementVNode("a",{class:"fas fa-circle-user",href:"#",onClick:e[0]||(e[0]=l.withModifiers((...u)=>i.showDropDownFunc&&i.showDropDownFunc(...u),["stop","prevent"]))}),l.createElementVNode("div",{class:l.normalizeClass({show:i.showDropDown,"z-depth-2":i.showDropDown,hidden:!i.showDropDown})},[l.createElementVNode("ul",W,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(i.items,u=>(l.openBlock(),l.createElementBlock("li",{key:u.display},[l.createElementVNode("a",{href:u.url,class:l.normalizeClass([u.icon])},l.toDisplayString(u.display),11,Z)]))),128))])],2)])])),[[n,i.hideDropDownFunc]])}const ee=k(J,[["render",_]]),te=i=>{i.component("mithril-data-handler",Q),i.component("mithril-side-menu",ee)},se={install:(i,e)=>{$(i),z(i),te(i)}};class C{constructor(){this.framework=new R,this.setupLogging()}SetupComponents(e){return e.use(se),e}setupLogging(){var e=!1;this.framework.errorLogger.setLoggingFunction(function(t,r){if(!(t===null||e)){e=!0;var s=document.location,a=r,n=t;n+=": at document path '"+s+"'.",a!==null&&(n+=`
 at `+a),h.post("API/Command/v1/Log",{logLevel:"Error",message:n}).send()}})}}const le="";class re{constructor(){P(this,"Core");this.Core=new C}}o.BrowserUtils=y,o.DatabaseConnection=w,o.Downloader=j,o.Mithril=C,o.Request=h,o.StorageMode=S,o.ThemeStartup=re,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});

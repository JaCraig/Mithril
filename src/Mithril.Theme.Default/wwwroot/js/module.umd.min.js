(function(u,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("moment"),require("vue")):typeof define=="function"&&define.amd?define(["exports","moment","vue"],d):(u=typeof globalThis<"u"?globalThis:u||self,d(u.themedefault={},u.moment,u.Vue))})(this,function(u,d,a){"use strict";var Ce=Object.defineProperty;var ke=(u,d,a)=>d in u?Ce(u,d,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[d]=a;var V=(u,d,a)=>ke(u,typeof d!="symbol"?d+"":d,a);class ${set(e,t){localStorage.setItem(e,t)}setObject(e,t){this.set(e,JSON.stringify(t))}get(e,t=""){return localStorage.getItem(e)||t}has(e){return this.get(e,null)!==null}remove(e){localStorage.removeItem(e)}clear(){localStorage.clear()}get length(){return localStorage.length}key(e){return localStorage.key(e)}getObject(e,t=null){let r=this.get(e);return r&&JSON.parse(r)||t}}class z{set(e,t){sessionStorage.setItem(e,t)}setObject(e,t){this.set(e,JSON.stringify(t))}get(e,t=""){return sessionStorage.getItem(e)||t}has(e){return this.get(e,null)!==null}remove(e){sessionStorage.removeItem(e)}clear(){sessionStorage.clear()}get length(){return sessionStorage.length}key(e){return sessionStorage.key(e)}getObject(e,t=null){let r=this.get(e);return r&&JSON.parse(r)||t}}class q{constructor(e){this.outputFormat=e??"[{Timestamp}]	[{Level}]	{Message}{Exception}"}format(e){return this.outputFormat.replace(/{(\w+)}/g,(t,r)=>r==="Timestamp"?e.timestamp.toISOString():r==="Level"?e.level:r==="Message"?e.message:r==="Exception"?e.exception?`
`+e.exception.stack:"":e.properties[r])}}class W{constructor(e="Debug"){this.allowedLevels=["Verbose","Debug","Information","Warning","Error","Fatal"],this.minimumLevel=e,this.allowedLevels=this.allowedLevels.slice(this.allowedLevels.indexOf(e))}filter(e){return this.allowedLevels.indexOf(e.level)>=0}}class M{constructor(){this.styles={Verbose:"color: white;",Debug:"color: green",Information:"color: blue",Warning:"color: yellow",Error:"color: red",Fatal:"color: palevioletred"},this.consoleMethods={Verbose:(e,t,r)=>{console.log(e,t,r)},Debug:(e,t,r)=>{console.debug(e,t,r)},Information:(e,t,r)=>{console.info(e,t,r)},Warning:(e,t,r)=>{console.warn(e,t,r)},Error:(e,t,r)=>{console.error(e,t,r)},Fatal:(e,t,r)=>{console.error(e,t,r)}}}write(e){let t=e.args&&typeof e.args!="object",r=e.args&&typeof e.args=="object";this.consoleMethods[e.level]("%c"+e.message,this.styles[e.level],t?e.args:""),r&&console.table(e.args)}}class D{constructor(e){this.filters=[],this.enrichers=[],this.loggerConfiguration=e}writeTo(e){return this.sink=e,this.loggerConfiguration}minimumLevel(e){return this.filters.push(new W(e)),this}filter(e){return this.filters.push(e),this}formatUsing(e){return this.formatter=e,this}enrichWith(e){return this.enrichers.push(e),this}process(e){this.formatter??(this.formatter=new q),this.sink??(this.sink=new M);let t=Object.assign({},e);this.filters.some(r=>r.filter(t))&&(this.enrichers.forEach(r=>r.enrich(t)),t.message=this.formatter.format(t)||t.message,this.sink.write(t))}}class J{constructor(){this.pipelines=[]}writeTo(e){let t=new D(this);return this.pipelines.push(t),t.writeTo(e)}minimumLevel(e){let t=new D(this);return this.pipelines.push(t),t.minimumLevel(e)}filter(e){let t=new D(this);return this.pipelines.push(t),t.filter(e)}formatUsing(e){let t=new D(this);return this.pipelines.push(t),t.formatUsing(e)}enrichWith(e){let t=new D(this);return this.pipelines.push(t),t.enrichWith(e)}write(e,t,r,s){let n={level:e,message:t,properties:{},exception:s,timestamp:new Date,args:r};this.pipelines.forEach(o=>o.process(n))}}class Y{enrich(e){e.properties??(e.properties={}),e.properties.url=window.location.href}}class Q{enrich(e){e.properties??(e.properties={});let t=this.matchAll(new Error().stack.toString(),/at([\s\w\d\.$]+)[\(]?((http|https|ftp)[^\)\n]+)[\)]?/gi).map(r=>r[2].trim());e.properties.caller=t[t.length-1]}matchAll(e,t){const r=t.global?t.flags:t.flags+"g",s=new RegExp(t,r);let n=[],o;for(;o=s.exec(e);)n.push(o);return n}}class c{constructor(){}static configure(){return this.loggerConfiguration??(this.loggerConfiguration=window.LoggerConfiguration||new J),window.LoggerConfiguration=this.loggerConfiguration,this.loggerConfiguration}static write(e,t,r,s){c.configure().write(e,t,r,s)}static verbose(e,t){this.write("Verbose",e,t)}static debug(e,t){this.write("Debug",e,t)}static information(e,t){this.write("Information",e,t)}static warning(e,t){this.write("Warning",e,t)}static error(e,t,r){this.write("Error",e,t,r)}static fatal(e,t,r){this.write("Fatal",e,t,r)}}class U{constructor(e,t,r){this.dbName=e,this.tables=t,this.version=r;const s=indexedDB.open(e,r);s.onupgradeneeded=n=>{this.database=n.target.result;for(const o of t)this.database.objectStoreNames.contains(o)&&this.database.deleteObjectStore(o),this.database.createObjectStore(o)},s.onsuccess=n=>{this.database=n.target.result},s.onerror=n=>{c.error("Failed to open the database:",n.target.error)}}openDatabase(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.version);r.onsuccess=s=>{this.database=s.target.result,e(this)},r.onerror=s=>{c.error("Failed to open the database:",s.target.error),t(new Error("Failed to open the database:"+s.target.error))}})}add(e,t,r){return new Promise((s,n)=>{const h=this.database.transaction(e,"readwrite").objectStore(e).put(t,r);h.onsuccess=()=>{s()},h.onerror=g=>{c.error("Failed to add an object to the database: ",g.target.error),n(new Error("Failed to add an object to the database: "+g.target.error))}})}remove(e,t){return new Promise((r,s)=>{const l=this.database.transaction(e,"readwrite").objectStore(e).delete(t);l.onsuccess=()=>{r()},l.onerror=h=>{c.error("Failed to remove an object from the database: ",h.target.error),s(new Error("Failed to remove an object from the database: "+h.target.error))}})}getByKey(e,t){return new Promise((r,s)=>{const l=this.database.transaction(e,"readwrite").objectStore(e).get(t);l.onsuccess=h=>{r(h.target.result)},l.onerror=h=>{c.error("Failed to retrieve an object from the database: ",h.target.error),s(new Error("Failed to retrieve an object from the database: "+h.target.error))}})}getKeys(e){return new Promise((t,r)=>{const o=this.database.transaction(e,"readwrite").objectStore(e).getAllKeys();o.onsuccess=l=>{t(l.target.result)},o.onerror=l=>{c.error("Failed to retrieve an object from the database: ",l.target.error),r(new Error("Failed to retrieve keys from the database: "+l.target.error))}})}get(e,t){return new Promise((r,s)=>{const l=this.database.transaction(e,"readwrite").objectStore(e).get(t);l.onsuccess=h=>{r(h.target.result)},l.onerror=h=>{c.error("Failed to retrieve an object from the database: ",h.target.error),s(new Error("Failed to retrieve an object from the database: "+h.target.error))}})}getAll(e,t){return new Promise((r,s)=>{const l=this.database.transaction(e,"readwrite").objectStore(e).getAll(t);l.onsuccess=h=>{r(h.target.result)},l.onerror=h=>{c.error("Failed to retrieve an object from the database: ",h.target.error),s(new Error("Failed to retrieve objects from the database: "+h.target.error))}})}}class x{constructor(){this.database=new U("cacheStore",["cache","cacheEntryOptions"],1)}async clear(){await this.database.openDatabase();let e=await this.database.getAll("cacheEntryOptions"),t=await this.database.getAll("cache");for(let r=0;r<e.length;r++){let s=t[r];await this.remove(s.key)}return this}async getOptions(e){return await this.database.openDatabase(),this.database.getByKey("cacheEntryOptions",e)}async add(e,t,r){return await this.database.openDatabase(),await this.database.add("cache",e,t),await this.database.add("cacheEntryOptions",r,t),this}async remove(e){return await this.database.openDatabase(),await this.database.remove("cache",e),await this.database.remove("cacheEntryOptions",e),this}async get(e){return await this.database.openDatabase(),this.database.getByKey("cache",e)}async compact(){await this.database.openDatabase();let e=await this.database.getAll("cacheEntryOptions"),t=await this.database.getAll("cache"),r=new Date().getTime();for(let s=0;s<e.length;s++){let n=e[s],o=t[s];n.expirationTime!=0&&n.expirationTime<r&&await this.remove(o.key)}return this}}class k{constructor(){}static configure(e=new x){this.storageProvider??(this.storageProvider=window.StorageProvider||new x),window.StorageProvider=this.storageProvider}static async set(e,t,r={expirationTime:0,slidingExpirationTime:0,sliding:!1}){c.debug("Setting object in cache: ",{key:e,value:t,entryOptions:r}),this.configure(),await this.storageProvider.add(t,e,r)}static async get(e){c.debug("Getting object from cache: "+e),this.configure(),await this.storageProvider.compact();let t=await this.storageProvider.get(e);if(t==null)return t;let r=await this.storageProvider.getOptions(e);return r.sliding&&await this.set(e,t,{expirationTime:new Date().getTime()+r.slidingExpirationTime,slidingExpirationTime:r.slidingExpirationTime,sliding:!0}),t}static async remove(e){c.debug("Removing object from cache: "+e),this.configure(),await this.storageProvider.remove(e)}static async clear(){c.debug("Clearing cache"),this.configure(),await this.storageProvider.clear()}}class b{constructor(e){this.options={method:"GET",url:"",headers:{},credentials:"same-origin",serializer:JSON.stringify,parser:t=>t.json(),success:t=>{c.debug("Request response from "+this.options.url+":",t)},error:t=>{c.error("Request error from "+this.options.url+":",t)},retry:t=>{c.debug("Request retry on "+this.options.url+":",{attempt:t})},storageMode:0,cacheKey:"",timeout:6e4,retryAttempts:3,retryDelay:1e3},this.abortController=null,this.options={...this.options,...e}}static get(e,t){return new b({method:"GET",url:e,data:t,cacheKey:e+JSON.stringify(t)}).withHeaders({Accept:"application/json"})}static post(e,t){return new b({method:"POST",url:e,data:t,cacheKey:e+JSON.stringify(t),storageMode:2}).withHeaders({"Content-Type":"application/json",Accept:"application/json"})}static put(e,t){return new b({method:"PUT",url:e,data:t,cacheKey:e+JSON.stringify(t),storageMode:2}).withHeaders({"Content-Type":"application/json",Accept:"application/json"})}static delete(e,t){return new b({method:"DELETE",url:e,data:t,cacheKey:e+JSON.stringify(t),storageMode:2}).withHeaders({Accept:"application/json"})}static ofType(e,t,r){return new b({method:e,url:t,data:r,cacheKey:t+JSON.stringify(r)}).withHeaders({Accept:"application/json"})}withAuthenticationProvider(e){return this.options.authenticationProvider=e,this}withHeaders(e){return this.options.headers={...this.options.headers,...e},this}withCancellationToken(e){return this.options.cancellationToken=e,this}withCredentials(e){return this.options.credentials=e,this}withSerializer(e){return this.options.serializer=e,this}withParser(e){return this.options.parser=e,this}onSuccess(e){return this.options.success=e??(t=>{c.debug("Request response:",t)}),this}onError(e){return this.options.error=e??(t=>{c.error("Request error:",t)}),this}onRetry(e){return this.options.retry=e??(t=>{c.debug("Request retry:",{attempt:t})}),this}withStorageMode(e){return this.options.storageMode=e,this}withCacheKey(e){return this.options.cacheKey=e,this}withTimeout(e){return this.options.timeout=e??6e4,this}withRetryAttempts(e){return this.options.retryAttempts=e,this}withRetryDelay(e){return this.options.retryDelay=e,this}abort(){return this.abortController===null?this:(this.abortController.abort(),this.options.error(new Error("The request was aborted.")),this)}async send(){const{authenticationProvider:e,method:t,url:r,data:s,headers:n,credentials:o,serializer:l,parser:h,success:g,error:w,storageMode:p,cacheKey:S,timeout:j,retryAttempts:De,retryDelay:Ee,retry:Pe,cancellationToken:F}=this.options,R=new AbortController;this.abortController=R;let L=0,C=null;const H=async()=>{if(p===1||p===3){const f=await k.get(S);if(f!==void 0&&(g(f),p===1))return f}if(!navigator.onLine){if(p===0){const y=await k.get(S);if(y!==void 0)return g(y),y}const f=new Error("System is offline");return w(f),Promise.reject(f)}try{const f=l(s);await(e==null?void 0:e.authenticate(this));const y=await Promise.race([fetch(r,{method:t,credentials:o,headers:n,body:f,signal:R.signal}),this.handleTimeout(j)]);if(F!=null&&F.canceled)return Promise.reject(new Error("The request was canceled."));if(y.status>=200&&y.status<300){const O=await h(y);return g(O),p!==2&&await k.set(S,O),O}C=new Error(y.statusText),y.status===401&&await(e==null?void 0:e.authenticationFailed(this,y))}catch(f){C=f}return L<De?(++L,await new Promise(f=>setTimeout(f,Ee)),Pe(L),H()):(w(C),Promise.reject(C))};return H()}async handleTimeout(e){throw e??(e=6e4),await new Promise((t,r)=>{setTimeout(()=>{r(new Error("Request timeout"))},e)}),new Error("Request timeout")}}var A=(i=>(i[i.NetworkFirst=0]="NetworkFirst",i[i.StorageFirst=1]="StorageFirst",i[i.NetworkOnly=2]="NetworkOnly",i[i.StorageAndUpdate=3]="StorageAndUpdate",i))(A||{});class E{static get domain(){return window.location.protocol+"//"+window.location.host+"/"}static get isLocal(){return/^http:\/\/localhost:\d{5}\/$/.test(E.domain)}static get HashBang(){return window.location.hash.replace("#!","")}static get Id(){return window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1)}static GetQueryString(e){let t=window.location.href;var r=new RegExp("[?&]"+e+"=([^&#]*)","i"),s=r.exec(t);return s?s[1]:null}static setPageTitle(e){document.title=e}}const T=class T{};T.keyMappings={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INS:45,DEL:46,META:91,"*":106,"+":107,MINUS:109,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145,";":186,"=":187,"":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};let v=T;class G{constructor(e){this.keys=this.getKeys(e)}getKeys(e){return e.toUpperCase().split(/-(?!$)/).map(t=>v.keyMappings[t]||t.charCodeAt(0))}isPressed(e){let t=e;if(t.length!==this.keys.length)return!1;for(let r=0;r<t.length;++r)if(this.keys.indexOf(t[r])===-1)return!1;return!0}}class _{constructor(e,t){this.keyCodeSequence=e.toUpperCase(),this.keyCodes=e.toUpperCase().split(" ").map(r=>new G(r)),this.callback=t,this.length=this.keyCodes.length,this.isDefault=e==="<*>"}call(e,t,r){return this.callback(t,{scope:r,keysPressed:e}),!0}press(e,t,r){let s=e;if(s.length!==this.length)return!1;for(let n=0;n<this.keyCodes.length;++n)if(!this.keyCodes[n].isPressed(s[n]))return!1;return this.call(e,t,r)}isPartial(e){let t=e;if(t.length>this.length)return!1;for(let r=0;r<t.length;++r)if(!this.keyCodes[r].isPressed(t[r]))return!1;return!0}}class P{constructor(e){this.name=e,this.sequences=[]}press(e,t){this.sequences=this.sequences.sort((r,s)=>r.length>s.length?1:-1);for(let r=0;r<this.sequences.length;++r)if(this.sequences[r].press(e,t,this))return!0;return!1}callDefault(e,t){let r=this.sequences.filter(s=>s.isDefault);return r.length===0?!1:r[0].call(e,t,this)}isPartial(e){for(let t=0;t<this.sequences.length;++t)if(this.sequences[t].isPartial(e))return!0;return!1}addSequence(e,t){return this.removeSequence(e),this.sequences.push(new _(e,t)),this}removeSequence(e){return this.sequences=this.sequences.filter(t=>t.keyCodeSequence!==e.toUpperCase()),this}clear(){return this.sequences=[],this}}class X{constructor(){this.scopes={},this.scopes.Default=new P("Default"),this.currentScope=this.scopes.Default,this.filter=e=>{let t=(e.target||e.srcElement).tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},this.latestKeys=[]}setScope(e){let t=this.addScope(e);return this.currentScope=t,t}addScope(e){let t=this.scopes[e];return t!==void 0||(t=new P(e),this.scopes[e]=t),t}removeScope(e){return this.scopes[e]=void 0,e==="Default"&&(this.scopes.Default=new P("Default")),this.currentScope.name===e&&(this.currentScope=this.scopes.Default),this}clear(){return this.scopes={},this.scopes.Default=new P("Default"),this.currentScope=this.scopes.Default,this.latestKeys=[],this}bind(e,t){return this.currentScope.addSequence(e,t),this}unbind(e){return this.currentScope.removeSequence(e),this}press(e){if(!this.filter(e))return;let t=this.getKeys(e);this.latestKeys.push(t);let r=this.latestKeys.slice();if(this.currentScope.press(this.latestKeys,e))this.latestKeys=[];else{for(;this.latestKeys.length>0;){if(this.currentScope.isPartial(this.latestKeys))return;this.latestKeys.shift()}this.latestKeys.length===0&&this.currentScope.callDefault(r,e)}}getKeys(e){let t=[];return e.altKey&&t.push(v.keyMappings.ALT),e.ctrlKey&&t.push(v.keyMappings.CTRL),e.metaKey&&t.push(v.keyMappings.META),e.shiftKey&&t.push(v.keyMappings.SHIFT),t.indexOf(e.keyCode)===-1&&t.push(e.keyCode),t}}class K{}class Z{constructor(e,t){this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){return e==null?this.optional:(e=e,this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){return this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue}setValue(e,t){this.getValue(e),t[this.part]=this.getValue(e)}}class ee{constructor(e,t){let r=e.split("=",2);this.key=r[0],e=r[1],this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){if(e==null)return!1;let t=e.split("=",2);return t.length!==2||this.key.toUpperCase()!==t[0].toUpperCase()?!1:(e=t[1],e===void 0?this.optional:this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){if(e==null)return this.defaultValue;let t=e.split("=",2);return t.length!==2?this.defaultValue:(e=t[1],this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue)}setValue(e,t){this.getValue(e),t[this.key]=this.getValue(e)}}class te{constructor(e,t){e=e.replace(/[#!]/g,""),this.variable=e.charAt(0)==="{"&&e.charAt(e.length-1)==="}",e=e.replace(/[{}]/g,""),this.optional=e.charAt(0)==="^",this.part=e.replace(/[\^]/g,""),t[this.part]!==void 0?this.defaultValue=t[this.part]:this.defaultValue=""}isMatch(e){return e==null?this.optional:(e=e.replace(/[#!]/g,""),this.variable?this.optional||e!=="":this.optional||e.toUpperCase()===this.part.toUpperCase())}getValue(e){return this.variable?e!==void 0?e||this.defaultValue:this.defaultValue:e||this.defaultValue}setValue(e,t){e=e||"",e=e.replace(/[#!]/g,""),t[this.part]=this.getValue(e)}}class re{constructor(e,t,r){r===void 0&&(r=new K),this.url=this.fixUrl(e),this.pathParts=this.getPathParts(this.url).map(s=>new Z(s,r)),this.pathParts=this.pathParts?this.pathParts:[],this.queryParts=this.getQueryParts(this.url).map(s=>new ee(s,r)),this.queryParts=this.queryParts?this.queryParts:[],this.hashParts=this.getHashParts(this.url).map(s=>new te(s,r)),this.hashParts=this.hashParts?this.hashParts:[],this.callbacks=[t],this.defaultValues=r}isRoute(e){return this.url===this.fixUrl(e)}addCallback(e){this.callbacks.push(e)}removeCallback(e){this.callbacks=this.callbacks.filter(t=>t!==e)}fixUrl(e){return e.length?e.replace(/^\//,"").replace(/\/+/g,"/").replace(/^\/|\/($|\?)/,"").replace(/\/\#/g,"#"):e}getPathParts(e){return e.split("?",2)[0].split("#",2)[0].split("/")}getHashParts(e){let t=e.split("?",2)[0].split("#",2);return t.length<2?[]:[t[1].replace("!","")]}getQueryParts(e){let t=e.split("?",2);return t.length<2?[]:(e=t[1],e?e.split("&"):[])}getParametersFromUrl(e,t,r){let s=new K;for(let n=0;n<e.length;++n)this.pathParts[n].setValue(e[n],s);for(let n=0;n<t.length;++n)this.queryParts[n].setValue(t[n],s);for(let n=0;n<r.length;++n)this.hashParts[n].setValue(r[n],s);if(this.pathParts.length>e.length)for(let n=e.length;n<this.pathParts.length;++n)this.pathParts[n].setValue("",s);if(this.queryParts.length>t.length)for(let n=t.length;n<this.queryParts.length;++n)this.queryParts[n].setValue("",s);if(this.hashParts.length>r.length)for(let n=r.length;n<this.hashParts.length;++n)this.hashParts[n].setValue("",s);return s}isMatch(e,t,r){if(this.pathParts.length<e.length)return!1;for(let s=0;s<e.length;++s)if(!this.pathParts[s].isMatch(e[s]))return!1;if(this.pathParts.length>e.length){for(let s=e.length;s<this.pathParts.length;++s)if(!this.pathParts[s].isMatch(""))return!1}if(this.queryParts.length<t.length)return!1;for(let s=0;s<t.length;++s)if(!this.queryParts[s].isMatch(t[s]))return!1;if(this.queryParts.length>t.length){for(let s=t.length;s<this.queryParts.length;++s)if(!this.queryParts[s].isMatch(""))return!1}if(this.hashParts.length<r.length)return!1;for(let s=0;s<r.length;++s)if(!this.hashParts[s].isMatch(r[s]))return!1;if(this.hashParts.length>r.length){for(let s=r.length;s<this.hashParts.length;++s)if(!this.hashParts[s].isMatch(""))return!1}return!0}run(e){e=this.fixUrl(e);let t=this.getPathParts(e),r=this.getQueryParts(e),s=this.getHashParts(e);if(!this.isMatch(t,r,s))return!1;let n=this.getParametersFromUrl(t,r,s);return n.url=e,this.callbacks.forEach(o=>o(n)),!0}}class se{constructor(){this.routes=[]}map(e){for(let t=0;t<e.length;++t)this.addRoute(e[t].url,e[t].action,e[t].defaultValues)}addRoute(e,t,r){let s=this.routes.filter(n=>n.isRoute(e));return s.length===0?this.routes.push(new re(e,t,r)):s[0].addCallback(t),this}run(e){for(let t=0;t<this.routes.length;++t)if(this.routes[t].run(e))return!0;return!1}}class ie{back(e){e===void 0&&(e=1),window.history.go(-1*e)}forward(e){e===void 0&&(e=1),window.history.go(e)}push(e,t,r){window.history.pushState(e,r,t)}replace(e,t,r){window.history.replaceState(e,r,t)}get state(){return window.history.state}get length(){return window.history.length}}class ne{static exportData(e,t,r=E.Id,s=0){if(e.length==0)return;r=r||E.Id;let n="";s===0?n=this.exportCSV(e,t,r):n=e.join(","),this.download(n,r)}static capitalize(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}static exportCSV(e,t,r){var l,h;let s="",n=Object.keys(e[0]),o="";for(let g=0;g<n.length;++g){let w=n[g],p=t.filter(function(j){return j.property===w});p.length===0&&(p=[{display:w,property:w}]);let S=((l=p[0])==null?void 0:l.display)||((h=p[0])==null?void 0:h.property)||w;s+=o+'"'+this.capitalize(S)+'"',o=","}s+=`
`;for(let g=0;g<e.length;++g){let w=e[g],p=Object.keys(w);o="";for(let S=0;S<p.length;++S)s+=o+'"'+w[p[S]].replaceAll('"',"'")+'"',o=",";s+=`
`}return s}static download(e,t){if(e!=null){if(navigator.msSaveBlob){navigator.msSaveBlob(new Blob([e]),t);return}var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}class ae{constructor(){c.configure().minimumLevel("Debug").enrichWith(new Q).enrichWith(new Y).formatUsing(new q("[{Timestamp}]	[{Level}]	[{caller}]		{Message}{Exception}")).writeTo(new M),this.localStorage=new $,this.sessionStorage=new z,this.hotkeys=new X,this.router=new se,this.history=new ie,window.addEventListener("keydown",e=>this.hotkeys.press(e)),window.onerror=(e,t,r,s,n)=>{c.error(e.toString(),{url:t,line:r,column:s,stack:(n==null?void 0:n.stack)||""},n)}}}let m={mounted:function(i,e){if(m.onEventBound=m.onEvent.bind({el:i}),document.addEventListener("click",m.onEventBound),typeof e.value!="function")throw new Error("Argument must be a function");m.cb=e.value},cb:function(i){},onEvent:function(i){i.target===this.el||this.el.contains(i.target)||!m.cb||m.cb(i)},onEventBound:function(){},unbind:function(){document.removeEventListener("click",m.onEventBound)},update:function(i,e){if(typeof e.value!="function")throw new Error("Argument must be a function");m.cb=e.value}};function oe(i){return i.directive("click-outside",m),i}function le(i){return i==null||(i.config.globalProperties.$filters={moment:function(e,t,r){return e==null?"N/A":(r??(r="YYYY-MM-DDThh:mm:ss"),t??(t="M-D-YYYY h:mm A"),d(e,r).format(t))},capitalize:function(e){return e==null?"":e.charAt(0).toUpperCase()+e.slice(1)},maxsize:function(e,t,r){return e==null?"":e.length<=t?e:(r??(r="..."),e.substring(0,t)+r)},currency:function(e,t,r){return e==null?"":(t??(t="en-US"),r??(r={style:"currency",currency:"USD"}),Intl.NumberFormat(t,r).format(e))}}),i}class N{}String.prototype.slugify=function(){return this.trim().replace(/ /g,"-").replace(/-{2,}/g,"-").replace(/^-+|-+$/g,"").replace(/([^a-zA-Z0-9-_/./:]+)/g,"")},String.prototype.stripHTML=function(){let i=document.createElement("div");return i.innerHTML=this,(i.textContent||i.innerText||"").replace(/^\s+|\s+$/g,"")},String.prototype.toNumber=function(){return this==null?0:parseFloat(this.stripHTML().replace(/[^0-9.-]/g,""))};const he=a.defineComponent({name:"DataHandler",data:function(){return{count:0,timer:0,internalData:this.model}},props:{model:{type:Object,default:{}},schema:{type:N,default:new N}},methods:{fetchData:function(){if(!this.schema.loadUrl)return;let i=this;b.post("/api/query",{query:i.schema.datalistQuery}).onSuccess(e=>{i.schema.datalist=e.data.dropDown}).withStorageMode(A.StorageAndUpdate).send()},saveData:function(){},deleteData:function(){}},created:function(){if(!this.schema.datalistQuery)return;this.fetchData()},watch:{model:function(i,e){e!==i&&(this.internalModel=i)}}}),B=(i,e)=>{const t=i.__vccOpts||i;for(const[r,s]of e)t[r]=s;return t};function ce(i,e,t,r,s,n){return a.openBlock(),a.createElementBlock("div",null,[a.createTextVNode(" ASDF "),(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(i.schema.children,o=>(a.openBlock(),a.createBlock(a.resolveDynamicComponent(o.type),{key:o.type,data:i.internalData,schema:o,onSave:i.saveData,onDelete:i.deleteData,onLoad:i.fetchData},null,40,["data","schema","onSave","onDelete","onLoad"]))),128)),a.createElementVNode("pre",null,a.toDisplayString(i.internalData),1)])}const ue=B(he,[["render",ce]]),ge=a.defineComponent({data:function(){return{items:this.items,showDropDown:!1}},props:{items:Array},methods:{showDropDownFunc:function(){this.showDropDown=!0},hideDropDownFunc:function(){this.showDropDown=!1}},directives:{clickOutside:m}}),de={class:"unstyled"},pe={class:"grouped"},fe=["href"];function me(i,e,t,r,s,n){const o=a.resolveDirective("click-outside");return a.withDirectives((a.openBlock(),a.createElementBlock("ul",de,[a.createElementVNode("li",null,[a.createElementVNode("a",{class:"fas fa-circle-user",href:"#",onClick:e[0]||(e[0]=a.withModifiers((...l)=>i.showDropDownFunc&&i.showDropDownFunc(...l),["stop","prevent"]))}),a.createElementVNode("div",{class:a.normalizeClass({show:i.showDropDown,"z-depth-2":i.showDropDown,hidden:!i.showDropDown})},[a.createElementVNode("ul",pe,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(i.items,l=>(a.openBlock(),a.createElementBlock("li",{key:l.display},[a.createElementVNode("a",{href:l.url,class:a.normalizeClass([l.icon])},a.toDisplayString(l.display),11,fe)]))),128))])],2)])])),[[o,i.hideDropDownFunc]])}const we=B(ge,[["render",me]]),ye=i=>{i.component("mithril-data-handler",ue),i.component("mithril-side-menu",we)},be={install:(i,e)=>{le(i),oe(i),ye(i)}};class I{constructor(){this.framework=new ae,this.setupLogging()}SetupComponents(e){return e.use(be),e}setupLogging(){c.configure().minimumLevel("Error").writeTo(new Se)}}class Se{write(e){var s;if(!(e==null||!window.navigator.onLine)){var t=((s=e.exception)==null?void 0:s.stack)||"",r=e.message;t!==null&&(r+=`
 at `+t),b.post("API/Command/v1/Log",{logLevel:"Error",message:r}).send()}}}class ve{constructor(){V(this,"Core");this.Core=new I}}u.BrowserUtils=E,u.DatabaseConnection=U,u.Downloader=ne,u.Mithril=I,u.Request=b,u.StorageMode=A,u.ThemeStartup=ve,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});

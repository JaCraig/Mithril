(function(o,n){typeof exports=="object"&&typeof module<"u"?module.exports=n():typeof define=="function"&&define.amd?define(n):(o=typeof globalThis<"u"?globalThis:o||self,o.filesystem=n())})(this,function(){"use strict";class o{constructor(e){this.outputFormat=e??"[{Timestamp}]	[{Level}]	{Message}{Exception}"}format(e){return this.outputFormat.replace(/{(\w+)}/g,(t,i)=>i==="Timestamp"?e.timestamp.toISOString():i==="Level"?e.level:i==="Message"?e.message:i==="Exception"?e.exception?`
`+e.exception.stack:"":e.properties[i])}}class n{constructor(e="Debug"){this.allowedLevels=["Verbose","Debug","Information","Warning","Error","Fatal"],this.minimumLevel=e,this.allowedLevels=this.allowedLevels.slice(this.allowedLevels.indexOf(e))}filter(e){return this.allowedLevels.indexOf(e.level)>=0}}class u{constructor(){this.styles={Verbose:"color: white;",Debug:"color: green",Information:"color: blue",Warning:"color: yellow",Error:"color: red",Fatal:"color: palevioletred"},this.consoleMethods={Verbose:(e,t,i)=>{console.log(e,t,i)},Debug:(e,t,i)=>{console.debug(e,t,i)},Information:(e,t,i)=>{console.info(e,t,i)},Warning:(e,t,i)=>{console.warn(e,t,i)},Error:(e,t,i)=>{console.error(e,t,i)},Fatal:(e,t,i)=>{console.error(e,t,i)}}}write(e){let t=e.args&&typeof e.args!="object",i=e.args&&typeof e.args=="object";this.consoleMethods[e.level]("%c"+e.message,this.styles[e.level],t?e.args:""),i&&console.table(e.args)}}class l{constructor(e){this.filters=[],this.enrichers=[],this.loggerConfiguration=e}writeTo(e){return this.sink=e,this.loggerConfiguration}minimumLevel(e){return this.filters.push(new n(e)),this}filter(e){return this.filters.push(e),this}formatUsing(e){return this.formatter=e,this}enrichWith(e){return this.enrichers.push(e),this}process(e){this.formatter??(this.formatter=new o),this.sink??(this.sink=new u);let t=Object.assign({},e);this.filters.some(i=>i.filter(t))&&(this.enrichers.forEach(i=>i.enrich(t)),t.message=this.formatter.format(t)||t.message,this.sink.write(t))}}class g{constructor(){this.pipelines=[]}writeTo(e){let t=new l(this);return this.pipelines.push(t),t.writeTo(e)}minimumLevel(e){let t=new l(this);return this.pipelines.push(t),t.minimumLevel(e)}filter(e){let t=new l(this);return this.pipelines.push(t),t.filter(e)}formatUsing(e){let t=new l(this);return this.pipelines.push(t),t.formatUsing(e)}enrichWith(e){let t=new l(this);return this.pipelines.push(t),t.enrichWith(e)}write(e,t,i,r){let h={level:e,message:t,properties:{},exception:r,timestamp:new Date,args:i};this.pipelines.forEach(p=>p.process(h))}}class c{constructor(){}static configure(){return this.loggerConfiguration??(this.loggerConfiguration=window.LoggerConfiguration||new g),window.LoggerConfiguration=this.loggerConfiguration,this.loggerConfiguration}static write(e,t,i,r){c.configure().write(e,t,i,r)}static verbose(e,t){this.write("Verbose",e,t)}static debug(e,t){this.write("Debug",e,t)}static information(e,t){this.write("Information",e,t)}static warning(e,t){this.write("Warning",e,t)}static error(e,t,i){this.write("Error",e,t,i)}static fatal(e,t,i){this.write("Fatal",e,t,i)}}class s{static get domain(){return window.location.protocol+"//"+window.location.host+"/"}static get isLocal(){return/^http:\/\/localhost:\d{5}\/$/.test(s.domain)}static get HashBang(){return window.location.hash.replace("#!","")}static get Id(){return window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1)}static GetQueryString(e){let t=window.location.href;var i=new RegExp("[?&]"+e+"=([^&#]*)","i"),r=i.exec(t);return r?r[1]:null}static setPageTitle(e){document.title=e}}class f{constructor(){c.debug("File Browser loading");var e=document.getElementsByTagName("a"),t=s.GetQueryString("host");t==null&&(t="/"),s.isLocal||(t=s.domain+t);for(var i=0;i<e.length;++i)e[i].addEventListener("click",function(r){r.preventDefault();var h=this.href.replace(s.domain,"");return window.parent.postMessage(JSON.stringify({href:h}),t),!1});c.debug("File Browser loaded")}SetupComponents(e){}}return(()=>{new f})()});
